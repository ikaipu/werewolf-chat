# 捨てチャットルームアプリ要件定義

## 1. 機能要件

### 1.1 ユーザー管理

#### 基本認証機能
- ユーザー登録機能
  - メールアドレスとパスワードによる登録
  - メールアドレス確認機能
    - 登録時に確認メールを自動送信
    - メール未確認時の機能制限
    - 確認メールの再送信機能
- ログイン機能
  - メールアドレスとパスワードによるログイン
  - パスワードリセット機能
    - リセットメールの送信
    - パスワードの再設定
- ログアウト機能

#### メール通知テンプレート
1. パスワードリセットメール
```html
【件名】
どうぶつチャット - パスワードの再設定

【本文HTML】
<p>こんにちは %DISPLAY_NAME% さん</p>

<p>パスワードの再設定を受け付けました。<br>
以下のリンクをクリックして、新しいパスワードを設定してください。</p>

<p><a href="%LINK%">パスワードを再設定する</a></p>

<p>このメールに心当たりがない場合は、無視していただいて構いません。</p>

<p>よろしくお願いいたします。</p>

<p>どうぶつチャットチーム</p>
```

2. メール確認メール
```html
【件名】
どうぶつチャット - メールアドレスの確認

【本文HTML】
<p>こんにちは %DISPLAY_NAME% さん</p>

<p>どうぶつチャットへのご登録ありがとうございます。<br>
以下のリンクをクリックして、メールアドレスの確認を完了してください。</p>

<p><a href="%LINK%">メールアドレスを確認する</a></p>

<p>このメールに心当たりがない場合は、無視していただいて構いません。</p>

<p>よろしくお願いいたします。</p>

<p>どうぶつチャットチーム</p>
```

### 1.2 チャットルーム管理

- チャットルーム作成機能
  - ルーム名入力
  - ルーム作成後、自動的にルームに参加
- チャットルーム参加機能
  - URLによる参加
  - 初回参加時または退出後の再参加時に確認モーダルを表示
- チャットルーム退出機能
  - 個別ユーザーの退出
  - ページを閉じた際の自動退出
- 全ユーザー一斉退出機能
  - 全ての参加者が使用可能
  - 全参加者を一度に退出させる

### 1.3 メッセージング

- メッセージ送信機能
- リアルタイムメッセージ表示機能

### 1.4 ユーザー情報表示

- 参加者一覧リアルタイム表示機能

## 2. 非機能要件

### 2.1 セキュリティ

- Firebase Authenticationを使用したユーザー認証
  - メールアドレス確認による本人確認
  - 安全なパスワードリセットフロー
  - メール未確認ユーザーの機能制限
- Firestoreセキュリティルールによるデータアクセス制御

### 2.2 パフォーマンス

- Firestoreを使用した高速なメッセージ同期とユーザー状態管理

### 2.3 ユーザビリティ

- レスポンシブデザインによるマルチデバイス対応
- 直感的なUI/UXデザイン
- リアルタイムでの参加者情報更新

### 2.4 拡張性
- 将来的な機能追加に対応できる柔軟な設計

### 2.5 保守性
- コードの可読性と保守性を考慮した実装
- 適切なコメントとドキュメンテーション

## 3. 技術スタック

- フロントエンド: React, TypeScript, Tailwind CSS, Zustand
- バックエンド: Firebase (Firestore, Authentication)
- デプロイ: Firebase Hosting
- 開発環境: Vercel

## 4. 制約条件

- チャットルームは一時的な使用を想定し、長期的なデータ保持は不要

## 5. 多言語対応

### 5.1 言語切り替え機能

- 日本語と英語の切り替えに対応
- 右上の言語切り替えボタンで切り替え可能
- 選択した言語は永続化され、次回アクセス時も維持

### 5.2 対応言語

- 日本語
  - デフォルトの言語
  - すべてのUIテキストを日本語で表示
- 英語
  - 代替言語
  - すべてのUIテキストを英語で表示

### 5.3 翻訳対象

- ログイン/サインアップ画面
  - フォームラベル
  - ボタンテキスト
  - エラーメッセージ
- ホーム画面
  - ナビゲーション
  - ルーム作成/参加フォーム
- チャットルーム画面
  - ヘッダー情報
  - ボタンテキスト
  - プレースホルダー
  - システムメッセージ
  - トースト通知

## 6. 今後の拡張可能性

- 音声チャット機能の追加
- ゲーム進行と連動した自動ルーム管理
- カスタムルーム設定機能
- 他言語対応の追加（例：中国語、韓国語など）
